<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pizzaria Di√°konos</title>

<style>
body { font-family: Arial, sans-serif; background:#e6e6e6; margin:0; padding:15px; }
h1 { text-align:center; color:#b30000; }
.container { max-width:900px; margin:auto; }
.card { background:#f5f5f5; padding:15px; margin-bottom:15px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,.15); }
.mesa { border-left:6px solid #b30000; }
label { display:block; margin-top:8px; font-weight:bold; }
input, select, button { width:100%; padding:10px; margin-top:5px; border-radius:6px; border:1px solid #ccc; }
.btn-add { background:#b30000; color:#fff; border:none; }
.btn-danger { background:#666; color:#fff; border:none; margin-top:10px; }
.total { font-size:22px; font-weight:bold; color:#b30000; margin-top:10px; }
.resumo { background:#eaeaea; padding:10px; border-radius:6px; margin-top:10px; }
.pizza-box { background:#fff; padding:10px; border-radius:6px; margin-top:10px; }
hr { margin:10px 0; }

/* SABORES LADO A LADO */
.sabores {
 display:grid;
 grid-template-columns: repeat(2, 1fr);
 gap:6px;
}
.sabores label {
 font-weight:normal;
}
</style>
</head>

<body>
<div class="container">
<h1>üçï Pizzaria Di√°konos</h1>

<div class="card">
<button class="btn-add" onclick="criarMesa()">‚ûï Criar Pedido</button>
</div>

<div id="mesas"></div>
</div>

<script>
let contadorMesas = 0;

const tabelaPrecos = {
 "Mussarela":{"35 cm":40,"40 cm":45,"45 cm":50},
 "Calabresa":{"35 cm":40,"40 cm":50,"45 cm":55},
 "Presunto":{"35 cm":40,"40 cm":50,"45 cm":55},
 "Mista":{"35 cm":40,"40 cm":50,"45 cm":55},
 "Frango c/ Catupiry":{"35 cm":40,"40 cm":50,"45 cm":60},
 "Napolitana":{"35 cm":43,"40 cm":50,"45 cm":60},
 "Quatro Queijos":{"35 cm":45,"40 cm":50,"45 cm":60},
 "Palmito":{"35 cm":43,"40 cm":50,"45 cm":60},
 "Caipira":{"35 cm":43,"40 cm":50,"45 cm":60},
 "Alho":{"35 cm":45,"40 cm":50,"45 cm":60},
 "Brasileira":{"35 cm":45,"40 cm":55,"45 cm":63},
 "Bacon":{"35 cm":47,"40 cm":55,"45 cm":63},
 "Portuguesa":{"35 cm":47,"40 cm":58,"45 cm":63},
 "Di√°konos":{"35 cm":47,"40 cm":58,"45 cm":63}
};

const saboresPromocao = [
 "Calabresa","Mussarela","Alho","Frango c/ Catupiry","Quatro Queijos"
];

const promocaoCombo35 = 70;
const promocaoFamilia = 90;

function criarMesa(){
 contadorMesas++;
 const id = "mesa"+contadorMesas;

 const mesa = document.createElement("div");
 mesa.className = "card mesa";
 mesa.id = id;

 mesa.innerHTML = `
 <h2>Pedido ${contadorMesas}</h2>

 <label>Nome do cliente</label>
 <input type="text" class="cliente">

 <label>Endere√ßo</label>
 <input type="text" class="endereco">

 <label><input type="checkbox" class="promo35" onchange="atualizarPizzas('${id}')">
 Combo da Pizza (2x 35cm)</label>

 <label><input type="checkbox" class="promoFamilia" onchange="atualizarPizzas('${id}')">
 Combo Fam√≠lia (1x 35cm e 1x 45cm)</label>

 <label>Quantidade de pizzas</label>
 <select class="quantidade" onchange="atualizarPizzas('${id}')">
   <option>1</option><option>2</option><option>3</option><option>4</option>
 </select>

 <label>Forma de pagamento</label>
 <select class="pagamento" onchange="mostrarTroco('${id}')">
   <option>Pix</option><option>Cart√£o</option><option>Dinheiro</option>
 </select>

 <div class="troco-box" style="display:none">
   <label>Troco para quanto?</label>
   <input type="number" class="troco">
 </div>

 <div class="pizzas"></div>

 <div class="resumo">
 <strong>Resumo:</strong>
 <div class="lista">Nenhum</div>
 </div>

 <div class="total">Total: R$ <span class="valor">0,00</span></div>

 <button class="btn-add" onclick="enviarWhatsApp('${id}')">üì≤ Enviar WhatsApp</button>
 <button class="btn-danger" onclick="document.getElementById('${id}').remove()">üóëÔ∏è Apagar Pedido</button>
 `;

 document.getElementById("mesas").appendChild(mesa);
 atualizarPizzas(id);
}

function mostrarTroco(id){
 const mesa = document.getElementById(id);
 mesa.querySelector(".troco-box").style.display =
 mesa.querySelector(".pagamento").value==="Dinheiro" ? "block" : "none";
}

function atualizarPizzas(id){
 const mesa = document.getElementById(id);
 const pizzasDiv = mesa.querySelector(".pizzas");
 let qtd = parseInt(mesa.querySelector(".quantidade").value);

 if (mesa.querySelector(".promo35").checked || mesa.querySelector(".promoFamilia").checked){
   qtd = 2;
   mesa.querySelector(".quantidade").value = 2;
 }

 pizzasDiv.innerHTML = "";
 for(let i=1;i<=qtd;i++){
  pizzasDiv.innerHTML += criarPizzaHTML(i,id);
 }
 calcular(id);
}

function criarPizzaHTML(num,id){
 const mesa = document.getElementById(id);
 const comboPizza = mesa.querySelector(".promo35").checked;
 const comboFamilia = mesa.querySelector(".promoFamilia").checked;

 let tamanhoHTML = `
 <option>35 cm</option>
 <option>40 cm</option>
 <option>45 cm</option>`;

 if(comboPizza){
   tamanhoHTML = `<option selected>35 cm</option>`;
 }

 if(comboFamilia){
   tamanhoHTML = num === 1
     ? `<option selected>35 cm</option>`
     : `<option selected>45 cm</option>`;
 }

 return `
 <div class="pizza-box">
 <strong>Pizza ${num}</strong>

 <label>Tamanho</label>
 <select class="tamanho" onchange="calcular('${id}')">
   ${tamanhoHTML}
 </select>

 <hr>

 <div class="sabores">
 ${Object.keys(tabelaPrecos).map(s=>{
  const permitido = (!comboPizza && !comboFamilia) || saboresPromocao.includes(s);
  return `
   <label style="opacity:${permitido?1:.4}">
   <input type="checkbox" ${permitido?"":"disabled"} value="${s}" onchange="calcular('${id}')"> ${s}
   </label>`;
 }).join("")}
 </div>

 </div>`;
}

function calcular(id){
 const mesa = document.getElementById(id);
 let total = 0;
 let resumo = [];

 mesa.querySelectorAll(".pizza-box").forEach((p,i)=>{
  const tamanho = p.querySelector(".tamanho").value;
  const sabores = [...p.querySelectorAll("input:checked")].map(x=>x.value);

  if(sabores.length){
   const maior = Math.max(...sabores.map(s=>tabelaPrecos[s][tamanho]));
   total += maior;
   resumo.push(`Pizza ${i+1} (${tamanho}): ${sabores.join(", ")}`);
  }
 });

 if (mesa.querySelector(".promo35").checked) total = promocaoCombo35;
 if (mesa.querySelector(".promoFamilia").checked) total = promocaoFamilia;

 mesa.querySelector(".valor").innerText = total.toFixed(2).replace(".",",");
 mesa.querySelector(".lista").innerHTML = resumo.join("<br>") || "Nenhum";
}

function enviarWhatsApp(id){
 const mesa = document.getElementById(id);

 const msg =
`üçï Pedido - Pizzaria Di√°konos
${mesa.querySelector("h2").innerText}

üë§ Cliente: ${mesa.querySelector(".cliente").value || "N√£o informado"}
üìç Endere√ßo: ${mesa.querySelector(".endereco").value || "N√£o informado"}

${mesa.querySelector(".lista").innerText}

üí≥ Pagamento: ${mesa.querySelector(".pagamento").value}
üí∞ Total: R$ ${mesa.querySelector(".valor").innerText}`;

 window.open("https://wa.me/5521969243387?text="+encodeURIComponent(msg));
}
</script>
</body>
</html>